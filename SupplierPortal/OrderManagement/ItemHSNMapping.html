<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- <link rel="stylesheet" href="style.css"> -->
    <link rel="stylesheet" href="../TableManager.css" />
    <link rel="stylesheet" href="../style.css" />
    <!-- <link rel="stylesheet" href="/css/subsidebar.css" /> -->
    <link rel="stylesheet" href="../OrderManagement/OrderDispatch.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <title>Simplify</title>
  </head>
  <body>
    <div class="dashboard-container">
      <!-- Sidebar -->
      <div id="sidebar-container"></div>
      <!-- Main Content -->
      <div class="main-content">
        <!-- Header -->
        <div id="header-container"></div>
        <!-- Dashboard Heading -->
        <div class="dashboard-heading">
          <div class="d-flex">
            <a href="../OrderManagement/Item.html">
              <img src="/icons/Arrow back ios (2).svg" alt="" />
            </a>
            <h3>Item HSN Mapping</h3>
          </div>
          <div>
            <a href="" class="text-decoration-none me-2">
              <img src="/icons/Synchronize.svg" alt="" />
            </a>
            <button class="border-0">
              <img
                src="/icons/save.svg"
                alt=""
                id="SaveBtn"
                onclick="storeDataToLocalStorage();"
              />
            </button>
          </div>
        </div>

        <main class="main-content" id="mainContent">
          <div
            class="d-flex justify-content-between flex-column profile-update-container"
          >
            <form action="" id="itemForm" class="container-fluid mt-4">
              <div class="row mb-3">
                <!--Chapter* -->
                <div class="col-12 col-md-6 mb-3">
                  <label for="Chapter" class="form-label">Chapter*</label>
                  <select name="chapter" id="chapter" class="form-select">
                    <option value="">Select Chapter</option>
                    <option value="Chapter 1">Chapter 1</option>
                    <option value="Chapter 2">Chapter 2</option>
                    <option value="Chapter 3">Chapter 3</option>
                  </select>
                  <div
                    id="ChapterError"
                    class="text-danger mt-1"
                    style="display: none"
                  >
                    Chapter is required.
                  </div>
                </div>
                <!-- Heading* -->
                <div class="col-12 col-md-6 mb-3">
                  <label for="Heading" class="form-label">Heading*</label>
                  <select name="heading" id="heading" class="form-select">
                    <option value="">Select Heading</option>
                    <option value="Heading 1">Heading 1</option>
                    <option value="Heading 2">Heading 2</option>
                    <option value="Heading 3">Heading 3</option>
                  </select>
                  <div
                    id="HeadingError"
                    class="text-danger mt-1"
                    style="display: none"
                  >
                    Heading is required.
                  </div>
                </div>
              </div>

              <div class="row mb-3">
                <!-- HSNCode* -->
                <div class="col-12 col-md-6 mb-3">
                  <label for="HSNCode" class="form-label">HSN Code*</label>
                  <input type="text" id="HSNCode" class="form-control" />
                  <div
                    id="HSNCodeError"
                    class="text-danger mt-1"
                    style="display: none"
                  >
                    HSN Code required.
                  </div>
                </div>
                <!-- Image -->
                <!-- <div class="col-12 col-md-6 mb-3">
                  <label for="image" class="form-label">Image*</label>
                  <input type="file" id="image" class="form-control" />
                  <div
                    id="imageError"
                    class="text-danger mt-1"
                    style="display: none"
                  >
                    Image required.
                  </div>
                </div> -->
              </div>
              <div></div>
            </form>
          </div>
        </main>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <script src="../loadContent.js"></script>
    <script src="/js/index.js"></script>
    <script src="/js/OrderManagement/OrderDispatch.js"></script>
    <script src="/js/tableManagerOrderDis.js"></script>
    <script>
      initializeTableManager("/js/tableConfigs.json");
    </script>
    <script>
      function storeDataToLocalStorage() {
        console.log("Attempting to store form data to localStorage!");

        // Fetch the input fields
        const chapter = document.getElementById("chapter");
        const heading = document.getElementById("heading");
        const hsnCode = document.getElementById("HSNCode");

        // Fetch the error message elements
        const chapterError = document.getElementById("ChapterError");
        const headingError = document.getElementById("HeadingError");
        const hsnCodeError = document.getElementById("HSNCodeError");

        // Validation flags
        let isValid = true;

        // Chapter validation
        if (!chapter.value.trim()) {
          chapterError.style.display = "block";
          isValid = false;
        } else {
          chapterError.style.display = "none";
        }

        // Heading validation
        if (!heading.value.trim()) {
          headingError.style.display = "block";
          isValid = false;
        } else {
          headingError.style.display = "none";
        }

        // HSN Code validation
        if (!hsnCode.value.trim()) {
          hsnCodeError.style.display = "block";
          isValid = false;
        } else {
          hsnCodeError.style.display = "none";
        }

        // If all fields are valid, save to localStorage
        if (isValid) {
          const formData = {
            Chapter: chapter.value.trim(),
            Heading: heading.value.trim(),
            HSNCode: hsnCode.value.trim(),
          };

          localStorage.setItem("formData", JSON.stringify(formData));
          console.log("Form data saved to localStorage:", formData);

          // Notify the user
          alert("Form data has been saved successfully!");
        } else {
          // Notify the user about validation errors
          alert("Please fill in all required fields before submitting.");
        }
      }

      // Attach event listener to the save button
      document.addEventListener("DOMContentLoaded", () => {
        const saveBtn = document.getElementById("saveBtn");
        if (saveBtn) {
          saveBtn.addEventListener("click", storeDataToLocalStorage);
        }
      });
    </script>
  </body>
</html>
